---
# Supported annotations:- 
# https://kubernetes-sigs.github.io/aws-load-balancer-controller/v2.7/guide/service/annotations/
apiVersion: v1
kind: Service
metadata:
  name: myapp
  namespace: lb-demo
  annotations:
    service.beta.kubernetes.io/aws-load-balancer-type: external
    service.beta.kubernetes.io/aws-load-balancer-nlb-target-type: ip  # use ip modefor routing the traffic as it goes straight to pod IPs because NLB registers Pod IPs directly as targets instead of instance mode to routing your request through node ports then kube-proxy then pods 
    service.beta.kubernetes.io/aws-load-balancer-scheme: internet-facing  # don't use internet facing for internal services such as dashboards prometheus and grafana
    # service.beta.kubernetes.io/aws-load-balancer-proxy-protocol: "*"
spec:
  type: LoadBalancer
  ports:
    - port: 8080
      targetPort: http
  selector:
    app: myapp
